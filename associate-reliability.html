<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Reliability & Attendance</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="reliability-styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìÖ My Reliability & Attendance</h1>
            <p class="subtitle">Track your PTO usage and attendance</p>
            <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; align-items: center;">
                <button type="button" onclick="window.location.href='homepage.html';" style="padding: 14px 32px; font-size: 1.1em; font-weight: bold; background: #FF5722; color: white; border: none; border-radius: 6px; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.3); transition: all 0.3s ease; flex: 1; min-width: 160px;">üè† All Tools</button>
                <button type="button" onclick="window.location.href='reliability-home.html';" class="btn-secondary" style="font-size: 0.95em;">üè† Reliability Home</button>
                <button type="button" id="myStatsBtn" class="btn-secondary" style="background: #2196F3; color: white;">üìä My Stats</button>
                <button type="button" id="myLeaveBtn" class="btn-secondary">üìã My Leave</button>
                <button type="button" id="ptostInfoBtn" class="btn-secondary" style="background: #4CAF50; color: white;">‚ÑπÔ∏è PTOST Info</button>
            </div>
        </header>

        <main>
            <!-- Employee Selection -->
            <section id="selectionSection" class="form-section">
                <h2>üë§ Select Your Name</h2>
                <div style="margin-bottom: 20px;">
                    <label for="employeeNameSelect" style="font-weight: bold; display: block; margin-bottom: 8px;">I am:</label>
                    <select id="employeeNameSelect" style="width: 100%; padding: 12px; border: 2px solid #2196F3; border-radius: 4px; font-size: 1em;">
                        <option value="">-- Select your name --</option>
                    </select>
                </div>
                
                <div id="loginWarning" style="padding: 15px; background: #E3F2FD; border-left: 4px solid #2196F3; border-radius: 4px; color: #0056B3;">
                    <strong>‚ÑπÔ∏è Privacy Note:</strong> This is an offline tracking tool for personal use. Your supervisor may have access to this same data for team management.
                </div>
            </section>

            <!-- Dashboard Section (Hidden until selection) -->
            <section id="dashboardSection" style="display: none;">
                <!-- Dashboard Navigation -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button type="button" class="nav-tab active" data-tab="summary">üìä Summary</button>
                    <button type="button" class="nav-tab" data-tab="history">üìã Attendance History</button>
                    <button type="button" class="nav-tab" data-tab="ptost">‚è∞ PTOST Details</button>
                    <button type="button" class="nav-tab" data-tab="education">‚ÑπÔ∏è Learn About PTOST</button>
                    <button type="button" onclick="logout()" class="nav-tab logout-tab">üö™ Logout</button>
                </div>

                <!-- Summary Tab -->
                <div id="summaryTab" class="tab-content">
                    <div class="form-section">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 id="summaryHeader">My Summary</h2>
                            <small id="summaryDate" style="color: #666;"></small>
                        </div>
                        
                        <!-- PTOST Balance Card -->
                        <div class="ptost-balance-card">
                            <h3>‚è∞ PTOST Balance (2026)</h3>
                            <div id="ptostSummaryDisplay"></div>
                        </div>
                        
                        <!-- Reliability Summary Card -->
                        <div class="reliability-summary-card">
                            <h3>üìä My Reliability Tracking</h3>
                            <div id="reliabilitySummaryDisplay"></div>
                        </div>
                        
                        <!-- Current Period Stats -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="plannedHoursValue">0h</div>
                                <div class="stat-label">Planned Leave</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="unplannedHoursValue">0h</div>
                                <div class="stat-label">Unplanned Leave</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="ptostUsedValue">0h</div>
                                <div class="stat-label">PTOST Used</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value text-danger" id="reliabilityHoursValue">0h</div>
                                <div class="stat-label">Reliability Hours</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attendance History Tab -->
                <div id="historyTab" class="tab-content" style="display: none;">
                    <div class="form-section">
                        <h2>üìã Attendance History</h2>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: bold; margin-right: 10px;">Show:</label>
                            <button type="button" class="period-btn active" data-period="all">All Time</button>
                            <button type="button" class="period-btn" data-period="ytd">Year to Date</button>
                            <button type="button" class="period-btn" data-period="3months">Last 3 Months</button>
                        </div>
                        
                        <div id="leaveHistoryDisplay"></div>
                    </div>
                </div>

                <!-- PTOST Details Tab -->
                <div id="ptostTab" class="tab-content" style="display: none;">
                    <div class="form-section">
                        <h2>‚è∞ PTOST Details</h2>
                        
                        <div class="ptost-detail-card">
                            <h3>Your PTOST Account</h3>
                            <div id="ptostDetailDisplay"></div>
                        </div>
                    </div>
                </div>

                <!-- Education Tab -->
                <div id="educationTab" class="tab-content" style="display: none;">
                    <div class="form-section" style="background: #F3E5F5; border-left: 4px solid #9C27B0;">
                        <h2>‚ÑπÔ∏è Understanding PTOST</h2>
                        
                        <div class="education-section">
                            <h3>üìå What is PTOST?</h3>
                            <p>PTOST stands for "Protected Time Off-Site/Time". It's your protected leave balance that you can use for unplanned absences.</p>
                            
                            <h3>‚è±Ô∏è Your Balance</h3>
                            <ul>
                                <li><strong>40 hours per calendar year</strong> (January 1 - December 31)</li>
                                <li>Resets each year on the first pay period (typically December 22)</li>
                                <li>Can be used for unplanned sick days, emergencies, or personal needs</li>
                            </ul>
                            
                            <h3>üéØ How It Works</h3>
                            <ol>
                                <li>You miss work (unplanned absence)</li>
                                <li>Supervisor logs the absence in the system</li>
                                <li>Supervisor may offer to apply your PTOST to cover it</li>
                                <li>If PTOST is applied, the hours are deducted from your balance</li>
                                <li>Your "Reliability Hours" (unplanned time NOT covered by PTOST) stays lower</li>
                            </ol>
                            
                            <h3>‚ö†Ô∏è Important</h3>
                            <ul>
                                <li>When PTOST reaches 0, you've used your protected time for the year</li>
                                <li>Additional unplanned absences without PTOST become "Reliability Hours"</li>
                                <li>High reliability hours may trigger attendance conversations with your supervisor</li>
                                <li>This tool is for tracking only - actual decisions are made by your supervisor</li>
                            </ul>
                            
                            <h3>üìû Questions?</h3>
                            <p>Talk to your supervisor about your attendance, PTOST balance, or reliability hours. They can explain how your usage fits into company policy.</p>
                        </div>
                    </div>
                </div>

                <!-- Emails Section (optional, at bottom) -->
                <div id="emailsSection" style="display: none;" class="form-section" style="background: #E3F2FD; border-left: 4px solid #2196F3; margin-top: 30px;">
                    <h3>‚úâÔ∏è Messages from Your Supervisor</h3>
                    <div id="emailsDisplay"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- Load dependencies in order -->
    <script src="reliability-services.js"></script>
    <script src="reliability-data.js"></script>
    <script src="associate-reliability.js"></script>
</body>
</html>
